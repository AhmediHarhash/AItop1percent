# Chapter 5.4 — Latency, Cost, and Quality: Pick Two (Then Fight for Three)

Every AI product lives inside a triangle. At the three corners: quality, cost, and latency. You can optimize for two at the expense of the third. Getting all three requires serious engineering — and honest tradeoff decisions.

---

### The Triangle

**Quality + Low Cost = Slow.** You can use a small, cheap model and add elaborate post-processing, multiple validation steps, and retry logic to boost quality. It'll be good and cheap, but it won't be fast.

**Quality + Low Latency = Expensive.** You can use the best model available with minimal processing to get fast, high-quality responses. But frontier models are expensive, and fast infrastructure costs more than slow infrastructure.

**Low Cost + Low Latency = Lower Quality.** You can use a small, fast, cheap model with minimal processing. It'll be fast and cheap, but the quality will reflect the model's limitations.

This isn't pessimism — it's physics. Understanding the triangle helps you make deliberate choices instead of discovering the tradeoffs in production.

---

### How to Navigate the Triangle

**Step 1: Determine which corner matters most for your product.**

For a real-time voice assistant: latency is king. Users won't wait. You'll accept higher cost and optimize quality within the latency budget.

For a batch document processing tool: quality is king. Nobody cares if it takes 30 seconds per document. You'll use the best model with extensive validation.

For a high-volume internal tool: cost is king. You're processing millions of requests per month. Even small per-query cost differences add up to significant monthly spend.

**Step 2: Set hard constraints on the non-negotiable corner.**

If latency is your priority: "Responses must start within 500ms. We will not ship anything slower, regardless of quality or cost impact."

If quality is your priority: "Accuracy must exceed 90%. We will not ship below this bar, regardless of cost or speed impact."

If cost is your priority: "Cost per query must stay below $0.02. We will not exceed this, regardless of quality or speed impact."

**Step 3: Optimize the other two within the constraint.**

This is where engineering skill matters. Within your hard constraint, push the other two corners as far as you can:

- **Model routing.** Send easy queries to a cheap, fast model. Send hard queries to an expensive, capable model. Average cost goes down. Average quality stays high. Overall latency improves because most queries hit the fast path.

- **Caching.** If users ask similar questions, cache the responses. Subsequent requests are free and instant. Cache hit rates of 20-40% are common and dramatically improve cost and latency.

- **Streaming.** Start returning the response before it's fully generated. The user perceives low latency even though total generation time is the same. This doesn't reduce actual processing time but dramatically improves perceived speed.

- **Prompt optimization.** Shorter, more efficient prompts reduce cost and latency without necessarily reducing quality. Often, a carefully crafted short prompt outperforms a long, detailed one.

- **Parallel processing.** For multi-step pipelines, run independent steps in parallel instead of sequentially. This reduces total latency without affecting cost or quality.

---

### The Cost Modeling Exercise

Before you commit to an architecture, model the cost:

Take your projected daily query volume. Multiply by cost per query (input tokens + output tokens at your provider's pricing). Add infrastructure costs (hosting, monitoring, logging). Add human costs (moderation, escalation, review). Multiply by 30 for monthly cost.

Now multiply your daily query volume by 10x. That's your scale scenario. Does the cost still make sense?

Common surprises:
- Retry storms (queries that fail and retry multiple times) can 3-5x your effective cost
- Long user inputs (people paste entire documents) can 10x the token count
- Chain-of-thought reasoning adds significant token overhead
- Tool-use loops (agents calling APIs) add both model costs and API costs

Build a cost model before you build the product. Update it monthly with real data.

---

### The Honest Conversation with Leadership

The triangle creates a conversation that most teams avoid: "We can't have the best quality, the lowest cost, and the fastest response. Here are the tradeoffs. Which matters most?"

This conversation is uncomfortable but essential. Without it, leadership expects all three, the team tries to deliver all three, and nobody's satisfied.

*Next: understanding user tolerance for errors — which varies dramatically by product type.*
