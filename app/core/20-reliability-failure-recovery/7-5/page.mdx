# 7.5 — Compensating Transactions for AI Actions

When you cannot undo an AI action, you can still make it right. Compensating transactions are the formal pattern for this. Borrowed from distributed systems design, a compensating transaction does not reverse the original action — it executes a new action that neutralizes the effect of the first. If an agent sends an incorrect invoice, you cannot unsend it, but you can send a corrected invoice and a credit memo. If an agent books the wrong appointment, you cannot un-book it, but you can book the correct appointment and cancel the wrong one with an explanation. The compensating transaction makes the system state correct, even if the history of actions remains.

This pattern matters because most agent actions are not transactional in the database sense. They do not support rollback. They happen in external systems, across API boundaries, in workflows with human participants. The only way to fix a bad action is to take another action that compensates for it. The skill is designing those compensating actions so they are fast, correct, and user-friendly.

## What Is a Compensating Transaction

A compensating transaction is an operation that semantically undoes a previous operation without technically reversing it. The original operation remains in the system's history. The compensating operation adjusts the system state to reflect what the state should have been if the error had not occurred.

In traditional databases, a transaction that fails can be rolled back — the database erases the transaction as if it never happened. In distributed systems and agent systems, rollback is often impossible. The transaction crossed system boundaries. It triggered side effects. It was observed by users. Compensating transactions accept that the original operation is permanent and focus on correcting the outcome.

A travel booking agent incorrectly reserves a hotel room for the wrong dates — February 10-12 instead of February 17-19. The original reservation is permanent — the hotel's system recorded it, the user received a confirmation email, the payment was authorized. The compensating transaction: create a new reservation for February 17-19, cancel the February 10-12 reservation, refund the authorization for the wrong reservation, send the user a corrected confirmation email explaining the error and the fix. The user ends up in the correct state — a reservation for the right dates — even though the wrong reservation remains in the system's history.

The key properties of a compensating transaction: it is idempotent — you can execute it multiple times without additional side effects; it is logged and auditable — you can trace the compensation back to the original error; it is user-visible if necessary — the user understands what happened and what you did to fix it; it is automatable if possible — you do not want every compensation to require manual intervention.

## Designing Compensations for AI Actions

Not every agent action has an obvious compensation. The compensation design depends on the action type, the external systems involved, and the user impact. You need a decision framework.

**Direct reversal compensations** work when the original action created a resource and the compensation deletes it, or when the original action modified a value and the compensation restores it. These are the closest to true rollback. Example: the agent created a calendar event at the wrong time. Compensation: delete the wrong event, create a new event at the correct time. Example: the agent updated a user's address to an incorrect value. Compensation: update the address back to the correct value.

**Additive compensations** work when the original action is permanent but you can add a new action that corrects the outcome. Example: the agent sent an invoice with the wrong amount. Compensation: send a credit memo for the incorrect amount and a new invoice with the correct amount. Example: the agent added the wrong item to a shipment. Compensation: send a return label for the wrong item and ship the correct item. The original action remains, but the net effect is correct.

**Override compensations** work when the original action set a state and the compensation sets a new state that supersedes it. Example: the agent set a user's subscription tier to Premium when it should be Enterprise. Compensation: set the subscription tier to Enterprise and backdate the change to the original effective date. Example: the agent marked a support ticket as resolved when it should remain open. Compensation: reopen the ticket and add a note explaining the error.

**Notification compensations** work when the original action communicated incorrect information and the compensation communicates a correction. Example: the agent sent a shipment notification with the wrong tracking number. Compensation: send a corrected notification with the right tracking number and an apology. Example: the agent posted a status update with incorrect information. Compensation: post a corrected status update and delete or retract the original if possible.

**Financial compensations** work when the original action had financial consequences and the compensation provides a refund, credit, or payment to make the user whole. Example: the agent charged the wrong amount. Compensation: refund the overcharge or charge the remaining amount if it was an undercharge. Example: the agent caused a service disruption that cost the user money. Compensation: issue a service credit or direct payment based on SLA terms.

A delivery platform's agent incorrectly marked 412 orders as delivered when they were still in transit. The agent action was permanent — the order status in the database reflected "delivered," and customers received "your order has been delivered" notifications. The compensation design: update order status back to "in transit," send corrected notifications to all affected customers explaining the error and providing accurate delivery estimates, issue a 10 dollar credit to each customer's account as an apology, add a flag to each order for priority customer support in case customers called with questions. The total cost of compensation was approximately 4,120 dollars in credits plus the cost of support handling follow-up inquiries. The compensation was executed automatically within twenty minutes of incident detection.

## Automated vs Manual Compensation

Compensation can be automated, manual, or hybrid. The right approach depends on compensation complexity, risk, and volume.

**Automated compensation** works when the compensation logic is straightforward, the risk of incorrect compensation is low, and the volume is high enough that manual compensation would take too long. Automated compensation requires: a compensation decision engine that maps error types to compensation actions, a compensation executor that calls the necessary APIs or updates the necessary systems, a compensation audit trail that logs every compensation for later review, a compensation verification step that confirms the compensation succeeded, and a fallback to manual compensation if automation fails.

Automated compensation is appropriate for: refunding an overcharge, correcting a data field, sending a corrected notification, issuing a service credit, canceling an incorrect booking. These are low-risk, high-frequency compensations where the correct action is unambiguous.

**Manual compensation** works when the compensation requires judgment, involves sensitive data or high-dollar amounts, or affects users in different ways depending on context. Manual compensation requires: a compensation work queue that lists all actions requiring compensation, a review interface that shows the error details and suggests compensation options, a decision workflow where a human selects and executes the appropriate compensation, and a tracking system that ensures every compensation is completed.

Manual compensation is appropriate for: large financial refunds, legal or compliance-sensitive corrections, compensations that require negotiation with external parties, compensations where user circumstances vary significantly. These are high-risk, lower-frequency compensations where human judgment is essential.

**Hybrid compensation** uses automation for the easy cases and escalates to manual review for the complex ones. A compensation orchestrator evaluates each error against a set of rules. If the error matches a known pattern with a low-risk compensation, the orchestrator executes automatically. If the error is ambiguous, high-risk, or above a threshold, the orchestrator creates a manual review task. The hybrid approach maximizes automation coverage while ensuring human oversight for edge cases.

A healthcare AI platform uses hybrid compensation. If the agent schedules an appointment at the wrong time and the appointment is more than 48 hours in the future, the system automatically reschedules and sends a corrected confirmation. If the appointment is within 48 hours, the system creates a manual review task because last-minute reschedules may not be acceptable to the patient. If the agent incorrectly billed a patient, the system automatically refunds amounts under 100 dollars and escalates larger refunds to the billing team for review. The hybrid model compensates 73 percent of errors automatically while ensuring high-risk compensations receive human review.

## Compensation Workflows

A compensation workflow is the end-to-end process from detecting an error to confirming the compensation succeeded. The workflow ensures that no error goes uncompensated and that every compensation is tracked to completion.

The workflow starts with **error detection**. This may come from monitoring, user reports, or incident investigation. The error detection system logs the error and creates a compensation task.

The next step is **compensation selection**. For automated compensations, a decision engine selects the appropriate compensation action based on error type. For manual compensations, a human reviewer selects the compensation after evaluating the error details.

The next step is **compensation execution**. The system or the human executes the compensation action — calling APIs, updating databases, sending notifications. Execution must be idempotent — if the workflow retries, it should not double-compensate.

The next step is **compensation verification**. The system confirms that the compensation succeeded. For API calls, this means checking the response code. For database updates, this means querying the updated state. For notifications, this means confirming delivery. Verification catches failed compensations before they are marked complete.

The final step is **compensation notification**. If the compensation affects a user, notify them. The notification explains what went wrong, what you did to fix it, and what they should do next if anything. Transparency builds trust.

The workflow must handle failure. If compensation execution fails, retry with exponential backoff. If retries fail, escalate to manual review. If manual review cannot resolve the issue, escalate to engineering or leadership. No compensation should fall through the cracks.

A financial services company's compensation workflow includes: automated error detection from their anomaly detection system, automatic classification of errors into compensation categories, automated execution for low-risk compensations, manual review for high-risk compensations, verification that checks account balances and transaction status after compensation, user notification via email and in-app message, and a dashboard that tracks compensation status for all errors. The workflow processes an average of 127 compensations per day with a 96 percent automation rate and a median time-to-compensate of 8 minutes for automated compensations and 52 minutes for manual compensations.

## User Communication About Compensation

How you communicate compensation matters as much as the compensation itself. Users judge your competence and trustworthiness based on how you explain and fix errors. The communication should be clear, honest, and action-oriented.

**Acknowledge the error explicitly.** Do not hide behind vague language. "We made a mistake" is better than "an issue occurred." "Our AI agent sent you the wrong invoice" is better than "there was a billing discrepancy." Users respect honesty.

**Explain what happened in plain language.** The user does not need to know about model drift or API failures, but they do need to understand the impact. "Our system incorrectly charged your account 87 dollars instead of 78 dollars" gives the user enough information to verify the error and understand the fix.

**Describe the compensation clearly.** "We have refunded the 9 dollar overcharge to your account. The refund will appear in 3-5 business days." Do not leave the user guessing what you did or when they will see the result.

**Apologize sincerely.** "We apologize for the error and any inconvenience it caused." A genuine apology goes a long way. Do not over-apologize — one clear apology is enough.

**Provide a contact path if the user has questions.** "If you have any questions or concerns, please contact our support team at this email." Give the user a way to escalate if the compensation does not resolve their issue.

An e-commerce platform's agent incorrectly applied a discount code to the wrong product, resulting in 89 customers receiving a 20 percent discount on a product that should not have been discounted. The platform's compensation communication: "We made an error. Our system incorrectly applied a 20 percent discount to your recent order for Product X. This product was not eligible for the discount. We have refunded the discount amount of 14 dollars to your original payment method. The refund will appear within 3-5 business days. We apologize for the confusion and any inconvenience this caused. If you have questions, please contact us at support email." The communication was clear, specific, and action-oriented. The company received only seven follow-up inquiries from the 89 affected customers, indicating that the communication resolved most users' concerns.

## Tracking Compensation Obligations

During a major incident, you may accumulate hundreds or thousands of compensation obligations. You need a system to track them, prioritize them, and ensure they are all completed before you close the incident.

A compensation obligation is a record that captures: the user or account affected, the error that occurred, the compensation action required, the compensation status — pending, in progress, completed, failed, the assigned owner if manual compensation is required, the priority level, and the target completion time. The obligation remains open until compensation is verified complete.

The compensation backlog is the set of all open obligations. During an incident, the backlog grows as you discover more affected users. After the incident is contained, the backlog shrinks as compensations are executed. The incident is not fully resolved until the backlog is empty.

Priority levels determine the order in which compensations are executed. High-priority compensations affect users with urgent needs, involve large dollar amounts, or have legal or compliance implications. Medium-priority compensations affect users with moderate impact. Low-priority compensations have minimal user impact but still need to be completed. Execute high-priority compensations first, then work through medium and low.

A SaaS company's incident in November 2025 created 1,847 compensation obligations. The team triaged the backlog into three priority tiers. Tier 1 included 62 obligations affecting enterprise customers with contract SLAs — these were completed within four hours. Tier 2 included 431 obligations affecting users with active support tickets — these were completed within 24 hours. Tier 3 included 1,354 obligations affecting all other users — these were completed within 72 hours. The compensation backlog was tracked in a dedicated dashboard that showed completion progress, assigned owners, and any blocked compensations requiring escalation. The incident was declared resolved only after all 1,847 compensations were verified complete.

## The Compensation Backlog During Major Incidents

Major incidents generate compensation backlogs that exceed your normal manual capacity. If your team can process twenty compensations per hour manually and the incident creates two thousand obligations, you need 100 hours of work — or you need to automate.

The compensation backlog surge requires pre-built automation. If you wait until the incident to design compensation logic, you will not move fast enough. The automation should be designed and tested in advance, ready to activate when needed.

The surge also requires resource allocation. If manual compensations are required, you may need to pull people from other teams to process the backlog. Customer support, account management, billing, and operations teams can all contribute. The incident commander should request resource allocation early — do not wait until the backlog is unmanageable.

The surge also requires user communication at scale. If you are compensating thousands of users, you cannot send individual emails — you need templated, bulk communication with personalized details. The communication system should support dynamic fields, segmentation by error type, and delivery tracking.

A logistics company's agent failure in January 2026 created 4,200 compensation obligations — the agent had incorrectly updated delivery addresses for shipments in transit. The compensations included: re-routing shipments to correct addresses, refunding expedited shipping fees for delayed deliveries, and issuing service credits. The company activated their pre-built compensation automation, which executed 3,100 compensations automatically. The remaining 1,100 compensations required manual review due to international shipments, high-value goods, or customer-specific circumstances. The company assigned twelve people from operations and customer support to process the manual backlog. The entire compensation effort took 28 hours and cost approximately 87,000 dollars in refunds, credits, and re-routing fees. The backlog tracking dashboard ensured that no compensation was missed.

## Cost of Compensation

Compensation has direct and indirect costs. The direct cost is the monetary value of refunds, credits, and payments. The indirect cost is the time spent designing, executing, and verifying compensations, the impact on user trust and retention, and the reputational damage from the incident.

Direct compensation costs are usually calculable. If you refund 10 dollars to each of 500 users, the cost is 5,000 dollars. If you issue a month of free service to 200 users whose average monthly payment is 50 dollars, the cost is 10,000 dollars in foregone revenue. Track direct costs to understand the financial impact of incidents and to inform decisions about prevention investments.

Indirect compensation costs are harder to measure but often larger. The time your team spends on compensation is time not spent building features or serving other users. The user trust you lose is hard to quantify but real — some users will churn because of the incident, and you may never know which ones. The reputational damage shows up in online reviews, social media, and word-of-mouth — difficult to measure but impossible to ignore.

A fintech company calculated the total cost of a June 2025 agent incident at 214,000 dollars. The breakdown: 47,000 dollars in direct refunds and credits, 89,000 dollars in engineering and operations time spent on recovery and compensation at an average loaded cost of 95 dollars per hour, 34,000 dollars in expedited support costs including overtime and contractor support, 44,000 dollars in estimated lost revenue from users who churned within 60 days of the incident. The direct compensation cost was 22 percent of the total. The larger costs were time and churn.

Compensation cost is also prevention cost justification. If a 200,000 dollar incident happens once per year and better testing infrastructure costs 150,000 dollars per year to operate, the investment is justified. Compensation cost makes prevention investment tangible.

The next subchapter covers cache warming after recovery — the process of restoring performance after an AI system recovers from an outage.

