# Chapter 3 — Agent Planning and Reasoning Architecture

The difference between agents that work and agents that waste tokens is usually planning. Good planning means decomposing goals sensibly, adapting when the plan fails, respecting constraints, and knowing when to abandon the plan entirely. Bad planning means looping forever, ignoring constraints, or committing to a strategy that was wrong from the start.

In 2026, most agent failures trace back to planning failures. The agent had the right tools and the right context, but it chose a nonsensical sequence of actions, ignored obvious constraints, or committed to a plan without validating whether it could actually work. Elite teams treat planning as a first-class system component with its own architecture, validation, and failure modes.

This chapter covers how agents plan, how to architect planning systems that adapt to reality, and how to balance planning depth against latency and cost. You'll learn the difference between static plans that break on contact with reality and dynamic plans that adjust as the agent learns more.

**Planning strategies and decomposition.** Agents break goals into subgoals. The quality of this decomposition determines everything downstream. You'll learn hierarchical decomposition, constraint-aware decomposition, and how to validate that a plan is coherent before committing to it.

**Goal decomposition quality.** Not all decompositions are equal. Some create unnecessary dependencies. Some ignore constraints. Some hallucinate subgoals that can't be achieved. You'll learn how to evaluate decomposition quality and how to guide agents toward better plans.

**Dynamic re-planning and adaptation.** Plans fail when they meet reality. Elite agents detect when the plan isn't working and adjust. You'll learn when to re-plan, when to abandon the goal, and how to prevent agents from thrashing between plans.

**Constraint-aware planning.** Agents must plan within constraints: latency budgets, cost budgets, permission boundaries, data policies, and business rules. Most agents ignore constraints until they violate them. You'll learn how to inject constraints into planning and validate plans against constraints before execution.

**Multi-objective planning.** Real tasks have multiple goals: complete the task, do it cheaply, do it fast, do it safely. These goals conflict. You'll learn how to specify objective priorities and how to evaluate plans that trade off between objectives.

**Reasoning depth control.** Some tasks need deep reasoning. Some need fast decisions. You'll learn how to control reasoning depth, when to use extended thinking, and how to prevent agents from overthinking simple tasks or underthinking complex ones.

**Extended thinking and chain-of-thought.** For complex tasks, extended reasoning improves plan quality. You'll learn when extended thinking is worth the latency, how to structure it, and how to prevent it from devolving into circular reasoning.

**Backtracking and rollback.** When a plan fails, agents need to backtrack to earlier states and try alternative paths. You'll learn how to implement backtracking, when to give up and re-plan entirely, and how to prevent agents from exploring the same dead ends repeatedly.

**Planning under uncertainty.** Agents often plan without full information. You'll learn how to plan when tool outputs are uncertain, when constraints might change, and how to build plans that are robust to partial information.

**Plan validation before execution.** Executing a bad plan wastes tokens, time, and user trust. You'll learn how to validate plans before committing: checking for logical consistency, constraint violations, and achievability.

**Explainable plans.** Users and auditors need to understand why the agent chose a particular plan. You'll learn how to make plans explainable, how to log planning decisions, and how to present plans to users for confirmation when needed.

**Budget-aware planning.** Every plan has a cost: API calls, latency, tool invocations, and token usage. You'll learn how to estimate plan cost before execution and how to choose cheaper plans when quality tradeoffs are acceptable.

---

## What This Chapter Covers

- **3.1** — Planning Strategies: Hierarchical, Sequential, Parallel
- **3.2** — Goal Decomposition: Breaking Complex Tasks into Subgoals
- **3.3** — Dynamic Re-Planning: When and How to Adapt
- **3.4** — Constraint-Aware Planning: Respecting Boundaries Before Acting
- **3.5** — Multi-Objective Planning: Balancing Speed, Cost, Safety, Quality
- **3.6** — Reasoning Depth Control: When to Think Deep vs Fast
- **3.7** — Extended Thinking: Using Chain-of-Thought for Complex Plans
- **3.8** — Backtracking and Rollback: Recovering from Failed Paths
- **3.9** — Planning Under Uncertainty: When You Don't Have Full Information
- **3.10** — Plan Validation: Checking Feasibility Before Execution
- **3.11** — Explainable Plans: Making Agent Reasoning Transparent
- **3.12** — Budget-Aware Planning: Cost and Latency as Planning Constraints

---

*We start with how agents decompose goals and why most decompositions fail.*
